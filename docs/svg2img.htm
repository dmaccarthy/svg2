<section class="Post NoPrintIcon" data-icon="svg">   
<h2 class="Collapse">Images</h2><div class="Collapse">
<p>The <code>image</code> method allows you to add <code>&lt;image&gt;</code> elements to your drawing. This method can be called on the <code>SVG2</code> or any <code>SVG2group</code> (group) instance.</p>
<pre class="Code" data-echo="js">svg.image("media/car.svg", {scale: 0.25}, [0, 0, 0.5, 1]);</pre>
<p class="Center"><svg id="Drawing1"></svg></p>

<p>The <code>image</code> method takes up to four arguments, with only the first one required:</p>
<ul>
    <li><code>href</code>: The absolute or relative URL of the image.</li>
    <li><code>size</code>: This can be a 2-array specifying the width and height. If it does not match the aspect ratio of the image, padding will be added as necessary; the image will not be stretched. If a single number is passed for the <code>size</code>, it will be treated as both the width and height. The <code>size</code> can also be an object with a <code>scale</code> attribute, as in the example above. The scale specifies the size compared to the original size of the image.</li>
    <li><code>posn</code>: Position and optional anchoring data as described in <a data-feed="svg2basics">Tutorial 1</a>.</li>
    <li><code>selector</code>: An existing <code>SVGImageElement</code>, or a <code>jquery</code> collection or selector string identifying the <code>&lt;image&gt;</code> element. If omitted, a new element will be appended.</li>
</ul>

<p>Since the browser loads images asynchronously, the <code>image</code> method is also asynchronous and returns a <code>Promise</code>. When the promise is fulfilled, a <code>jquery</code> collection containing the <code>&lt;image&gt;</code> element is passed to the resolve function.</p>
<!-- <p>If the <code>&lt;image&gt;</code> or any of its ancestor nodes is hidden or removed from the document, the browser may report its width and height to be 0, and scaling and positioning may not work as expected.</p> -->
</div></section>

<section class="Post NoPrintIcon" data-icon="svg">   
<h2 class="Collapse">Equations (using MathJax)</h2><div class="Collapse">
<p>You can use <a href="https://www.mathjax.org/" target="MathJax">MathJax</a> with <code>SVG2</code> to render symbols and equations as SVG images in your drawings. You will first need to create a MathJax configuration and then load the MathJax library:</p>
<pre class="Code" data-echo="html">&lt;script type="text/javascript"&gt;

window.MathJax = {
    startup: {typeset: false},
    loader: {load: ['[tex]/color', '[tex]/cancel']},
    tex: {packages: {'[+]': ['color', 'cancel']}}
};

&lt;/script&gt;
&lt;script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@4.1/tex-svg.js">&lt;/script&gt;</pre>

<p>MathJax loads asynchronously to improve performance, but this may cause errors if your code calls MathJax before it is fully loaded. <code>SVG2</code> includes a helper function <code>mjax_wait</code> to prevent this.</p>
<pre class="Code" data-echo="js">function draw() {

    <span class="Comment">// Instructions that do NOT require MathJax</span>

    mjax_wait().then(() => {

        <span class="Comment">// Instructions that DO require MathJax</span>

    });
}</pre>

<p>Add equations (as images) to your drawing by calling the <code>mjax</code> method on any <code>SVG2group</code> (group) instance.</p>
<pre class="Code" data-echo="js">svg.mjax("V = \\frac{4\\pi}{3} r^3", {scale: 2}, [0, 0], "#0065fe");</pre>

<p class="Center"><svg id="Sphere"></svg></p>
<p>The <code>mjax</code> method takes up to four arguments, with only the first one required:</p>
<ul>
    <li><code>tex</code>: The equation markup to be passed to MathJax. Remember to escape the backslash character!</li>
    <li><code>size</code>: This is the same as for the <code>image</code> method described above, except that if a scale object is used, a scale of 1 corresponds to a font-size of about 30 pixels (depending on the font).</li>
    <li><code>posn</code>: Position and optional anchoring data as described in <a data-feed="svg2basic">Tutorial 1</a>.</li>
    <li><code>color</code>: A default color for the rendering.</li>
</ul>
<p>The <code>mjax</code> method is asynchronous and returns a <code>Promise</code>. When the promise is fulfilled, a new <code>SVG2group</code> (group) instance containing the image is passed to the resolve function.</p>

</div></section>

<section class="Post NoPrintIcon" data-icon="svg">   
<h2 class="Collapse">Text</h2><div class="Collapse">
<p>The <code>text</code> method creates a new group that contains a child <code>&lt;text&gt;</code> element.</p>
<pre class="Code" data-echo="js">svg.text("SVG2!", [0, 2], 0, ["mono", 48, "none", "#0065fe@1"]);
svg.text("Hello, world!", [0, 1, "bottom"], 45, ["sans", 24, "red"]);
</pre>
<p class="Center"><svg id="Hello"></svg></p>

<p>The <code>text</code> method takes up to four arguments, with only the first one required:</p>
<ul>
    <li><code>text</code>: Plain text or HTML to be added to the <code>&lt;text&gt;</code> element.</li>
    <li><code>posn</code>: Position and optional anchoring data as described in <a data-feed="svg2basics">Tutorial 1</a>. Note that for text, only the string anchors (e.g. <code>"bottomleft"</code>) are accepted. Array anchors (e.g. <code>[0.5, 1]</code>) are not supported because the width and height of the text are not known until the browser has finished rendering the text. Anchoring of text is done by setting the containing <code>&lt;g&gt;</code> elementâ€™s <code>text-anchor</code> and <code>dominant-baseline</code> styles. You can set the anchor data to <code>false</code> to omit setting these styles, in which case the alignment will be determined by the inherited values or defaults:</li>
</ul>
<pre class="Code" data-echo="js">svg.text("Hello, world!", [0, 1, <span class="Blue">false</span>], 45, ["sans", 24, "red"])</pre>
<ul>
    <li><code>theta</code>: An angle to rotate the text; the anchor point will be used as the centre of rotation (pivot).</li>
    <li><code>css</code>: Style data to be applied to the <code>&lt;g&gt;</code> element (and inherited by the <code>&lt;text&gt;</code> element).</li>
</ul>

</div></section>

<script type="text/javascript" data-init="draw">

loadFeed.draw = () => {
    for (let i=0;i<3;i++) loadFeed[`draw${i}`]();
}

loadFeed.draw0 = () => {
    let svg = new SVG2("#Sphere", {lrbt: [-2, 2, -1, 1], scale: 80});
    svg.mjax("V = \\frac{4\\pi}{3} r^3", {scale: 2}, [0, 0], "#0065fe");
}

loadFeed.draw1 = () => {
    let svg = new SVG2("#Drawing1", {lrbt: [-3, 3, -1, 3], scale: 32, grid: 1, margin: 2});
    svg.image("media/car.svg", {scale: 0.25}, [0, 0, 0.5, 1]); //.then();
}

loadFeed.draw2 = () => {
    let svg = new SVG2("#Hello", {lrbt: [-3, 3, -1, 3], scale: 32, grid: 1, margin: 2});
    svg.text("SVG2!", [0, 2], 0, ["mono", 48, "none", "#0065fe@1"]);
    svg.text("Hello, world!", [0, 1, "bottom"], 45, ["sans", 24, "red"]);
}


loadFeed.data = {
    title: "SVG2 Tutorial 2: Images, Equations & Text",
    up: "home", prev: "svg2basics", next: "svg2anim"
}

</script>
